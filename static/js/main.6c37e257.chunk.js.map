{"version":3,"sources":["utils.js","WebAPI.js","contexts.js","pages/SignUpPage/SignUpPage.js","pages/LoginPage/LoginPage.js","pages/HomePage/HomePage.js","pages/AboutPage/AboutPage.js","pages/PostPage/PostPage.js","pages/CreateNewPostPage/CreateNewPostPage.js","components/Header/Header.js","components/App/App.js","index.js"],"names":["TOKEN_NAME","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","BASE_URL","getMe","fetch","headers","authorization","then","res","json","AuthContext","createContext","ErrorMessage","styled","div","Form","form","SignUpPage","setUser","useContext","useState","nickname","setNickname","username","setUsername","password","setPassword","errorMessage","setErrorMessage","history","useHistory","onSubmit","e","preventDefault","method","body","JSON","stringify","signUp","data","ok","message","response","toString","push","value","onChange","target","type","LoginPage","login","Root","PostContainer","PostTitle","Link","PostDate","Post","post","to","id","title","Date","createdAt","toLocaleString","HomePage","posts","setPosts","useEffect","map","Content","Text","Greeting","h1","Introduction","p","Image","AboutPage","h2","PostCreatedAt","PostContent","PostPage","setPost","useParams","getPost","Title","TitleInput","input","ContentTextarea","textarea","SubmitButton","button","CreateNewPostPage","setTitle","setBody","sendNewPost","rows","HeaderContainer","Brand","NavbarList","Nav","props","$active","LeftContainer","Header","location","useLocation","user","pathname","onClick","App","Provider","exact","path","ReactDOM","render","document","getElementById"],"mappings":"oKAAMA,EAAa,QAENC,EAAe,SAACC,GAC3BC,aAAaC,QAAQJ,EAAYE,IAGtBG,EAAe,WAC1B,OAAOF,aAAaG,QAAQN,ICLxBO,EAAW,qCAuCJC,EAAQ,WACnB,IAAMN,EAAQG,IACd,OAAOI,MAAM,GAAD,OAAIF,EAAJ,OAAmB,CAC7BG,QAAS,CACPC,cAAc,UAAD,OAAYT,MAE1BU,MAAK,SAACC,GAAD,OAASA,EAAIC,W,OC7CVC,EAAcC,wBAAc,M,wOCKzC,IAAMC,EAAeC,IAAOC,IAAV,KAIZC,EAAOF,IAAOG,KAAV,KAOK,SAASC,IAAc,IAC5BC,EAAYC,qBAAWT,GAAvBQ,QAD2B,EAEHE,mBAAS,IAFN,mBAE5BC,EAF4B,KAElBC,EAFkB,OAGHF,mBAAS,IAHN,mBAG5BG,EAH4B,KAGlBC,EAHkB,OAIHJ,mBAAS,IAJN,mBAI5BK,EAJ4B,KAIlBC,EAJkB,OAKKN,qBALL,mBAK5BO,EAL4B,KAKdC,EALc,KAM7BC,EAAUC,cAqBhB,OACE,eAACf,EAAD,CAAMgB,SApBa,SAACC,GACpBA,EAAEC,iBACFL,EAAgB,MFdE,SAACP,EAAUE,EAAUE,GACzC,OAAOrB,MAAM,GAAD,OAAIF,EAAJ,aAAyB,CACnCgC,OAAQ,OACR7B,QAAS,CACP,eAAgB,oBAElB8B,KAAMC,KAAKC,UAAU,CACnBhB,WACAE,WACAE,eAEDlB,MAAK,SAACC,GAAD,OAASA,EAAIC,UEInB6B,CAAOjB,EAAUE,EAAUE,GAAUlB,MAAK,SAACgC,GACzC,GAAgB,IAAZA,EAAKC,GACP,OAAOZ,EAAgBW,EAAKE,SAE9B7C,EAAa2C,EAAK1C,OAElBM,IAAQI,MAAK,SAACmC,GACZ,GAAoB,IAAhBA,EAASF,GAEX,OADA5C,EAAa,MACNgC,EAAgBc,EAASC,YAElCzB,EAAQwB,EAASH,MACjBV,EAAQe,KAAK,YAKjB,UACE,gDAEE,uBAAOC,MAAOxB,EAAUyB,SAAU,SAAAd,GAAC,OAAIV,EAAYU,EAAEe,OAAOF,aAE9D,gDAEE,uBAAOA,MAAOtB,EAAUuB,SAAU,SAAAd,GAAC,OAAIR,EAAYQ,EAAEe,OAAOF,aAE9D,gDAEE,uBACEG,KAAK,WACLH,MAAOpB,EACPqB,SAAU,SAAAd,GAAC,OAAIN,EAAYM,EAAEe,OAAOF,aAGxC,kDACClB,GAAgB,cAACf,EAAD,UAAee,O,wOCzDtC,IAAMf,EAAeC,IAAOC,IAAV,KAIZC,EAAOF,IAAOG,KAAV,KAOK,SAASiC,IAAa,IAC3B/B,EAAYC,qBAAWT,GAAvBQ,QAD0B,EAEFE,mBAAS,IAFP,mBAE3BG,EAF2B,KAEjBC,EAFiB,OAGFJ,mBAAS,IAHP,mBAG3BK,EAH2B,KAGjBC,EAHiB,OAIMN,qBAJN,mBAI3BO,EAJ2B,KAIbC,EAJa,KAK5BC,EAAUC,cAqBhB,OACE,eAAC,EAAD,CAAMC,SApBa,SAACC,GACpBJ,EAAgB,MHEC,SAACL,EAAUE,GAC9B,OAAOrB,MAAM,GAAD,OAAIF,EAAJ,UAAsB,CAChCgC,OAAQ,OACR7B,QAAS,CACP,eAAgB,oBAElB8B,KAAMC,KAAKC,UAAU,CACnBd,WACAE,eAEDlB,MAAK,SAACC,GAAD,OAASA,EAAIC,UGXnByC,CAAM3B,EAAUE,GAAUlB,MAAK,SAACgC,GAC9B,GAAgB,IAAZA,EAAKC,GACP,OAAOZ,EAAgBW,EAAKE,SAE9B7C,EAAa2C,EAAK1C,OAElBM,IAAQI,MAAK,SAACmC,GACZ,GAAoB,IAAhBA,EAASF,GAEX,OADA5C,EAAa,MACNgC,EAAgBc,EAASC,YAElCzB,EAAQwB,EAASH,MACjBV,EAAQe,KAAK,YAMjB,UACE,gDAEE,uBAAOC,MAAOtB,EAAUuB,SAAU,SAAAd,GAAC,OAAIR,EAAYQ,EAAEe,OAAOF,aAE9D,gDAEE,uBACEG,KAAK,WACLH,MAAOpB,EACPqB,SAAU,SAAAd,GAAC,OAAIN,EAAYM,EAAEe,OAAOF,aAGxC,kDACClB,GAAgB,cAAC,EAAD,UAAeA,O,yjBCpDtC,IAAMwB,EAAOtC,IAAOC,IAAV,KAKJsC,EAAgBvC,IAAOC,IAAV,KAQbuC,EAAYxC,YAAOyC,IAAPzC,CAAH,KAMT0C,EAAW1C,IAAOC,IAAV,KAId,SAAS0C,EAAT,GAAyB,IAATC,EAAQ,EAARA,KACd,OACE,eAACL,EAAD,WACE,cAACC,EAAD,CAAWK,GAAE,gBAAWD,EAAKE,IAA7B,SAAoCF,EAAKG,QACzC,cAACL,EAAD,UAAW,IAAIM,KAAKJ,EAAKK,WAAWC,sBAS3B,SAASC,IAAY,IAAD,EACP5C,mBAAS,IADF,mBAC1B6C,EAD0B,KACnBC,EADmB,KAOjC,OAJAC,qBAAU,WJzCH/D,MAAM,GAAD,OAAIF,EAAJ,uCAAkDK,MAAK,SAACC,GAAD,OACjEA,EAAIC,UIyCOF,MAAK,SAAC0D,GAAD,OAAWC,EAASD,QACnC,IAGD,cAACd,EAAD,UACGc,EAAMG,KAAI,SAACX,GAAD,OACT,cAACD,EAAD,CAAMC,KAAMA,GAAWA,EAAKE,S,wtBCnDpC,IAAMU,EAAUxD,IAAOC,IAAV,KAOPwD,EAAOzD,IAAOC,IAAV,KAKJyD,EAAW1D,IAAO2D,GAAV,KAIRC,EAAe5D,IAAO6D,EAAV,KAEZC,EAAQ9D,IAAOC,IAAV,KASI,SAAS8D,IACtB,OACE,eAACP,EAAD,WACE,eAACC,EAAD,WACE,cAACC,EAAD,0CACA,cAACE,EAAD,4LAIF,cAACE,EAAD,O,wgBChCN,IAAMnB,EAAO3C,IAAOC,IAAV,KAUJuC,GAAYxC,IAAOgE,GAAV,KAITC,GAAgBjE,IAAO6D,EAAV,KAKbK,GAAclE,IAAO6D,EAAV,KAIF,SAASM,KAAY,IAAD,EACT5D,mBAAS,IADA,mBAC1BqC,EAD0B,KACpBwB,EADoB,KAEzBtB,EAAOuB,cAAPvB,GAMR,OAJAQ,qBAAU,YNvBW,SAACR,GACtB,OAAOvD,MAAM,GAAD,OAAIF,EAAJ,qBAAyByD,IAAMpD,MAAK,SAACC,GAAD,OAASA,EAAIC,WMuB3D0E,CAAQxB,GAAIpD,MAAK,SAACkD,GAAD,OAAUwB,EAAQxB,EAAK,SACvC,IAGD,eAAC,EAAD,WACE,cAAC,GAAD,UAAYA,EAAKG,QACjB,eAACkB,GAAD,WAAe,mDAAW,IAAIjB,KAAKJ,EAAKK,WAAWC,oBACnD,cAACgB,GAAD,UAActB,EAAKtB,U,m0BCpCzB,IAAMvB,GAAeC,IAAOC,IAAV,MAIZC,GAAOF,IAAOG,KAAV,MASJoE,GAAQvE,IAAOC,IAAV,MAKLuE,GAAaxE,IAAOyE,MAAV,MAKVjB,GAAUxD,IAAOC,IAAV,MAMPyE,GAAkB1E,IAAO2E,SAAV,MAKfC,GAAe5E,IAAO6E,OAAV,MAEH,SAASC,KAAqB,IAAD,EAChBvE,mBAAS,IADO,mBACnCwC,EADmC,KAC5BgC,EAD4B,OAElBxE,mBAAS,IAFS,mBAEnCe,EAFmC,KAE7B0D,EAF6B,OAGFzE,qBAHE,mBAGnCO,EAHmC,KAGrBC,EAHqB,KAIpCC,EAAUC,cAYhB,OACE,eAAC,GAAD,CAAMC,SAXa,SAACC,GACpBA,EAAEC,iBPEqB,SAAC2B,EAAOzB,GACjC,IAAMtC,EAAQG,IACd,OAAOI,MAAM,GAAD,OAAIF,EAAJ,UAAsB,CAChCgC,OAAQ,OACR7B,QAAS,CACP,eAAgB,mBAChBC,cAAc,UAAD,OAAYT,IAE3BsC,KAAMC,KAAKC,UAAU,CACnBuB,QACAzB,WAED5B,MAAK,SAACC,GAAD,OAASA,EAAIC,UObnBqF,CAAYlC,EAAOzB,GAAM5B,MAAK,SAACgC,GAC7B,GAAgB,IAAZA,EAAKC,GACP,OAAOZ,EAAgBW,EAAKE,SAE9BZ,EAAQe,KAAK,SAKf,UACE,eAACwC,GAAD,2BAEE,cAACC,GAAD,CAAYxC,MAAOe,EAAOd,SAAU,SAAAd,GAAC,OAAI4D,EAAS5D,EAAEe,OAAOF,aAE7D,eAAC,GAAD,2BAEE,cAAC0C,GAAD,CACEQ,KAAM,GACNlD,MAAOV,EACPW,SAAU,SAAAd,GAAC,OAAI6D,EAAQ7D,EAAEe,OAAOF,aAGpC,cAAC4C,GAAD,2BACC9D,GAAgB,cAAC,GAAD,UAAeA,O,y/BCjEtC,IAAMqE,GAAkBnF,IAAOC,IAAV,MAefmF,GAAQpF,IAAOC,IAAV,MAKLoF,GAAarF,IAAOC,IAAV,MAMVqF,GAAMtF,YAAOyC,IAAPzC,CAAH,MAWL,SAACuF,GAAD,OACAA,EAAMC,SAAN,+CAMEC,GAAgBzF,IAAOC,IAAV,KAIfoF,IAKW,SAASK,KACtB,IAAMC,EAAWC,cACX5E,EAAUC,cAFe,EAGLX,qBAAWT,GAA7BgG,EAHuB,EAGvBA,KAAMxF,EAHiB,EAGjBA,QAUd,OACE,eAAC8E,GAAD,WACE,eAACM,GAAD,WACE,cAACL,GAAD,kDACA,eAACC,GAAD,WACE,cAACC,GAAD,CAAKzC,GAAG,IAAI2C,QAA+B,MAAtBG,EAASG,SAA9B,0BACA,cAACR,GAAD,CAAKzC,GAAG,SAAS2C,QAA+B,WAAtBG,EAASG,SAAnC,0BACCD,GACC,cAACP,GAAD,CAAKzC,GAAG,YAAY2C,QAA+B,cAAtBG,EAASG,SAAtC,gCAIN,eAACT,GAAD,YACIQ,GACA,qCACE,cAACP,GAAD,CAAKzC,GAAG,WAAW2C,QAA+B,aAAtBG,EAASG,SAArC,0BACA,cAACR,GAAD,CAAKzC,GAAG,SAAS2C,QAA+B,WAAtBG,EAASG,SAAnC,6BAGHD,GAAS,cAACP,GAAD,CAAKS,QA3BA,WACnBhH,EAAa,IACbsB,EAAQ,MACkB,MAAtBsF,EAASG,UACX9E,EAAQe,KAAK,MAuBD,gC,+FC7ElB,IAAMO,GAAOtC,IAAOC,IAAV,MAiDK+F,OA7Cf,WAAgB,IAAD,EACWzF,mBAAS,MADpB,mBACNsF,EADM,KACAxF,EADA,KAcb,OAXAiD,qBAAU,WAEJnE,KACFG,IAAQI,MAAK,SAACmC,GACRA,EAASF,IACXtB,EAAQwB,EAASH,WAItB,IAGD,cAAC7B,EAAYoG,SAAb,CAAsBjE,MAAO,CAAC6D,OAAMxF,WAApC,SACE,cAAC,GAAD,UACE,eAAC,IAAD,WACE,cAACqF,GAAD,qBACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOQ,OAAK,EAACC,KAAK,IAAlB,SACE,cAAChD,EAAD,MAEF,cAAC,IAAD,CAAOgD,KAAK,SAAZ,SACE,cAACpC,EAAD,MAEF,cAAC,IAAD,CAAOoC,KAAK,SAAZ,SACE,cAAC/D,EAAD,MAEF,cAAC,IAAD,CAAO+D,KAAK,WAAZ,SACE,cAAC/F,EAAD,MAEF,cAAC,IAAD,CAAO+F,KAAK,YAAZ,SACE,cAAChC,GAAD,MAEF,cAAC,IAAD,CAAOgC,KAAK,YAAZ,SACE,cAACrB,GAAD,iBCnDdsB,IAASC,OAAO,cAAC,GAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.6c37e257.chunk.js","sourcesContent":["const TOKEN_NAME = \"token\";\n\nexport const setAuthToken = (token) => {\n  localStorage.setItem(TOKEN_NAME, token);\n};\n\nexport const getAuthToken = () => {\n  return localStorage.getItem(TOKEN_NAME);\n};\n","import { getAuthToken } from \"./utils\";\n\nconst BASE_URL = \"https://student-json-api.lidemy.me\";\n\nexport const getPosts = () => {\n  return fetch(`${BASE_URL}/posts?_sort=createdAt&_order=desc`).then((res) =>\n    res.json()\n  );\n};\n\nexport const getPost = (id) => {\n  return fetch(`${BASE_URL}/posts?id=${id}`).then((res) => res.json());\n};\n\nexport const signUp = (nickname, username, password) => {\n  return fetch(`${BASE_URL}/register`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      nickname,\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n\nexport const login = (username, password) => {\n  return fetch(`${BASE_URL}/login`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n\nexport const getMe = () => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/me`, {\n    headers: {\n      authorization: `Bearer ${token}`,\n    },\n  }).then((res) => res.json());\n};\n\nexport const sendNewPost = (title, body) => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/posts`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n      authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({\n      title,\n      body,\n    }),\n  }).then((res) => res.json());\n};\n","import { createContext } from \"react\";\n\nexport const AuthContext = createContext(null);\n","import React, { useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport { signUp, getMe } from '../../WebAPI';\nimport { setAuthToken } from '../../utils';\nimport { useHistory } from 'react-router-dom';\nimport { AuthContext } from '../../contexts';\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst Form = styled.form`\n  width: 60%;\n  margin: 0 auto;\n  padding: 40px;\n  text-align: center;\n`;\n\nexport default function SignUpPage() {\n  const { setUser } = useContext(AuthContext);\n  const [nickname, setNickname] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrorMessage(null); // 先把錯誤訊息抹掉\n    signUp(nickname, username, password).then((data) => {\n      if (data.ok === 0) {\n        return setErrorMessage(data.message)\n      }\n      setAuthToken(data.token); // 登入成功把 token 放到 localStorage\n\n      getMe().then((response) => { // 驗證身份\n        if (response.ok !== 1) {\n          setAuthToken(null);\n          return setErrorMessage(response.toString());\n        }\n        setUser(response.data); // 設定登入狀態\n        history.push('/'); // 把頁面導向首頁\n      });\n    })\n  }\n  return (\n    <Form onSubmit={handleSubmit}>\n      <div>\n        暱稱: \n        <input value={nickname} onChange={e => setNickname(e.target.value)} />\n      </div>\n      <div>\n        帳號: \n        <input value={username} onChange={e => setUsername(e.target.value)} />\n      </div>\n      <div>\n        密碼: \n        <input \n          type=\"password\" \n          value={password} \n          onChange={e => setPassword(e.target.value)} \n        />\n      </div>\n      <button>註冊</button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </Form>\n  );\n}\n","import React, { useState, useContext } from 'react';\nimport styled from 'styled-components';\nimport { login, getMe } from '../../WebAPI';\nimport { setAuthToken } from '../../utils';\nimport { useHistory } from 'react-router-dom';\nimport { AuthContext } from '../../contexts';\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst Form = styled.form`\n  width: 60%;\n  margin: 0 auto;\n  padding: 40px;\n  text-align: center;\n`;\n\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = (e) => {\n    setErrorMessage(null); // 先把錯誤訊息抹掉\n    login(username, password).then((data) => {\n      if (data.ok === 0) {\n        return setErrorMessage(data.message)\n      }\n      setAuthToken(data.token); // 登入成功把 token 放到 localStorage\n\n      getMe().then((response) => { // 驗證身份\n        if (response.ok !== 1) {\n          setAuthToken(null);\n          return setErrorMessage(response.toString());\n        }\n        setUser(response.data); // 設定登入狀態\n        history.push('/'); // 把頁面導向首頁\n      });\n\n    })\n  }\n  return (\n    <Form onSubmit={handleSubmit}>\n      <div>\n        帳號: \n        <input value={username} onChange={e => setUsername(e.target.value)} />\n      </div>\n      <div>\n        密碼: \n        <input \n          type=\"password\" \n          value={password} \n          onChange={e => setPassword(e.target.value)} \n        />\n      </div>\n      <button>登入</button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </Form>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\n\nimport { Link } from 'react-router-dom';\nimport { getPosts } from '../../WebAPI';\n\nconst Root = styled.div`\n  width: 80%;\n  margin: 0 auto;\n`;\n\nconst PostContainer = styled.div`\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n`;\n\nconst PostTitle = styled(Link)`\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8);\n`;\n\nfunction Post({ post }) {\n  return (\n    <PostContainer>\n      <PostTitle to={`/post/${post.id}`}>{post.title}</PostTitle>\n      <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n    </PostContainer>\n  )\n}\n\nPost.propTypes = {\n  post: PropTypes.object\n};\n\nexport default function HomePage() {\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    getPosts().then((posts) => setPosts(posts))\n  }, [])\n\n  return (\n    <Root>\n      {posts.map((post) => (\n        <Post post={post} key={post.id} />\n      ))}\n    </Root>\n  );\n}\n","import styled from 'styled-components';\n\nconst Content = styled.div`\n  display: flex;\n  width: 800px;\n  margin: 0 auto;\n  padding: 40px 0;\n`;\n\nconst Text = styled.div`\n  flex: 2;\n  margin-right: 24px;\n`;\n\nconst Greeting = styled.h1`\n  margin: 0;\n`;\n\nconst Introduction = styled.p``;\n\nconst Image = styled.div`\n  flex: 1;\n  height: 300px;\n  background-image: url('https://mcdonalds.com.au/sites/mcdonalds.com.au/files/Product-Details-BigMac-mobile-201904.jpg');\n  background-size: cover;\n  background-position: center center;\n  background-repeat:no-repeat;\n`;\n\nexport default function AboutPage() {\n  return (\n    <Content>\n      <Text>\n        <Greeting>嗨~ 我是 YSKuo.</Greeting>\n        <Introduction>\n          我是 YSKuo 喜歡「無敵大麥克」，這是用來練習 React Router 及串 API 的作業。\n        </Introduction>\n      </Text>\n      <Image />\n    </Content>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport { useParams } from 'react-router-dom';\nimport { getPost } from '../../WebAPI';\n\nconst Post = styled.div`\n  box-sizing: border-box;\n  border: 1px solid black;\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin: 20px auto;\n  padding: 0 20px;\n`;\n\nconst PostTitle = styled.h2`\n  margin-bottom: 0;\n`;\n\nconst PostCreatedAt = styled.p`\n  align-self: flex-end;\n  margin: 0;\n`;\n\nconst PostContent = styled.p`\n  margin: 20px 0;\n`;\n\nexport default function PostPage() {\n  const [post, setPost] = useState({});\n  const { id } = useParams();\n\n  useEffect(() => {\n    getPost(id).then((post) => setPost(post[0]))\n  }, [])\n\n  return (\n    <Post>\n      <PostTitle>{post.title}</PostTitle>\n      <PostCreatedAt><b>寫於：</b>{new Date(post.createdAt).toLocaleString()}</PostCreatedAt>\n      <PostContent>{post.body}</PostContent>\n    </Post>\n  );\n}\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { sendNewPost } from '../../WebAPI';\nimport { useHistory } from 'react-router-dom';\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst Form = styled.form`\n  width: 60%;\n  margin: 0 auto;\n  padding: 40px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Title = styled.div`\n  display: flex;\n  margin-bottom: 20px;\n`;\n\nconst TitleInput = styled.input`\n  width: 300px;\n  margin-left: 20px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  align-items: flex-start;\n  margin-bottom: 20px;\n`;\n\nconst ContentTextarea = styled.textarea`\n  width: 300px;\n  margin-left: 20px;\n`;\n\nconst SubmitButton = styled.button``;\n\nexport default function CreateNewPostPage() {\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    sendNewPost(title, body).then((data) => {\n      if (data.ok === 0) {\n        return setErrorMessage(data.message);\n      }\n      history.push('/');\n    })\n  }\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Title>\n        標題:\n        <TitleInput value={title} onChange={e => setTitle(e.target.value)} />\n      </Title>\n      <Content>\n        內容:\n        <ContentTextarea \n          rows={10}\n          value={body} \n          onChange={e => setBody(e.target.value)}\n        />\n      </Content>\n      <SubmitButton>發表</SubmitButton>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </Form>\n  );\n}\n","import React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { AuthContext } from '../../contexts';\nimport { setAuthToken } from '../../utils';\n\nimport { Link, useLocation, useHistory } from 'react-router-dom';\n\nconst HeaderContainer = styled.div`\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0 32px;\n  box-sizing: border-box;\n  background-color: white;\n`;\n\nconst Brand = styled.div`\n  font-size: 32px;\n  font-weight: bold;\n`;\n\nconst NavbarList = styled.div`\n  display: flex;\n  align-items: center;\n  height: 64px;\n`;\n\nconst Nav = styled(Link)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ${(props) => \n    props.$active && \n    `\n    background: rgba(0, 0, 0, 0.2);\n  `}\n`;\n\nconst LeftContainer = styled.div`\n  display: flex;\n  align-items: center;\n\n  ${NavbarList} {\n    margin-left: 64px;\n  }\n`;\n\nexport default function Header() {\n  const location = useLocation();\n  const history = useHistory();\n  const { user, setUser } = useContext(AuthContext);\n\n  const handleLogout = () => {\n    setAuthToken('');\n    setUser(null);\n    if (location.pathname !== '/') {\n      history.push('/');\n    }\n  };\n\n  return (\n    <HeaderContainer>\n      <LeftContainer>\n        <Brand>我的第一個 Blog</Brand>\n        <NavbarList>\n          <Nav to='/' $active={location.pathname === '/'}>首頁</Nav>\n          <Nav to='/about' $active={location.pathname === '/about'} >關於</Nav>\n          {user && \n            <Nav to='/new-post' $active={location.pathname === '/new-post'}>發布</Nav>\n          }\n        </NavbarList>\n      </LeftContainer>\n      <NavbarList>\n        {!user && (\n          <>\n            <Nav to='/sign-up' $active={location.pathname === '/sign-up'}>註冊</Nav>\n            <Nav to='/login' $active={location.pathname === '/login'}>登入</Nav>\n          </>\n        )}\n        {user && (<Nav onClick={handleLogout}>登出</Nav>)}\n      </NavbarList>\n    </HeaderContainer>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport SignUpPage from '../../pages/SignUpPage';\nimport LoginPage from '../../pages/LoginPage';\nimport HomePage from '../../pages/HomePage';\nimport AboutPage from '../../pages/AboutPage';\nimport PostPage from '../../pages/PostPage';\nimport CreateNewPostPage from '../../pages/CreateNewPostPage';\nimport Header from '../Header';\nimport { AuthContext } from '../../contexts';\nimport { getMe } from '../../WebAPI';\nimport { getAuthToken } from '../../utils';\n\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\n\nconst Root = styled.div`\n  padding-top: 64px;\n`;\n\nfunction App() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    // 登入狀態處理\n    if (getAuthToken()) {\n      getMe().then((response) => {\n        if (response.ok) {\n          setUser(response.data);\n        }\n      })\n    }\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{user, setUser}}>\n      <Root>\n        <Router>\n          <Header>Header</Header>\n          <Switch>\n            <Route exact path='/'>\n              <HomePage />\n            </Route>\n            <Route path='/about'>\n              <AboutPage />\n            </Route>\n            <Route path='/login'>\n              <LoginPage />\n            </Route>\n            <Route path='/sign-up'>\n              <SignUpPage />\n            </Route>\n            <Route path='/post/:id'>\n              <PostPage />\n            </Route>\n            <Route path='/new-post'>\n              <CreateNewPostPage />\n            </Route>\n          </Switch>\n        </Router>\n      </Root>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}