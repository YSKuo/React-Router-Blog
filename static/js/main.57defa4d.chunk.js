(this.webpackJsonppractice=this.webpackJsonppractice||[]).push([[0],{35:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),i=e(20),a=e.n(i),o=e(5),u=e(2),s=e(3),j="token",b=function(n){localStorage.setItem(j,n)},d=function(){return localStorage.getItem(j)},f="https://student-json-api.lidemy.me",l=function(){var n=d();return fetch("".concat(f,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},O=e(4),h=Object(c.createContext)(null);function x(){var n=Object(u.a)(["\n  width: 60%;\n  margin: 0 auto;\n  padding: 40px;\n  text-align: center;\n"]);return x=function(){return n},n}function p(){var n=Object(u.a)(["\n  color: red;\n"]);return p=function(){return n},n}var v=s.a.div(p()),g=s.a.form(x());function m(){var n=Object(c.useContext)(h).setUser,t=Object(c.useState)(""),e=Object(o.a)(t,2),i=e[0],a=e[1],u=Object(c.useState)(""),s=Object(o.a)(u,2),j=s[0],d=s[1],x=Object(c.useState)(""),p=Object(o.a)(x,2),m=p[0],S=p[1],y=Object(c.useState)(),w=Object(o.a)(y,2),k=w[0],C=w[1],z=Object(O.f)();return Object(r.jsxs)(g,{onSubmit:function(t){C(null),function(n,t,e){return fetch("".concat(f,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(i,j,m).then((function(t){if(0===t.ok)return C(t.message);b(t.token),l().then((function(t){if(1!==t.ok)return b(null),C(t.toString());n(t.data),z.push("/")}))}))},children:[Object(r.jsxs)("div",{children:["\u66b1\u7a31:",Object(r.jsx)("input",{value:i,onChange:function(n){return a(n.target.value)}})]}),Object(r.jsxs)("div",{children:["\u5e33\u865f:",Object(r.jsx)("input",{value:j,onChange:function(n){return d(n.target.value)}})]}),Object(r.jsxs)("div",{children:["\u5bc6\u78bc:",Object(r.jsx)("input",{type:"password",value:m,onChange:function(n){return S(n.target.value)}})]}),Object(r.jsx)("button",{children:"\u8a3b\u518a"}),k&&Object(r.jsx)(v,{children:k})]})}function S(){var n=Object(u.a)(["\n  width: 60%;\n  margin: 0 auto;\n  padding: 40px;\n  text-align: center;\n"]);return S=function(){return n},n}function y(){var n=Object(u.a)(["\n  color: red;\n"]);return y=function(){return n},n}var w=s.a.div(y()),k=s.a.form(S());function C(){var n=Object(c.useContext)(h).setUser,t=Object(c.useState)(""),e=Object(o.a)(t,2),i=e[0],a=e[1],u=Object(c.useState)(""),s=Object(o.a)(u,2),j=s[0],d=s[1],x=Object(c.useState)(),p=Object(o.a)(x,2),v=p[0],g=p[1],m=Object(O.f)();return Object(r.jsxs)(k,{onSubmit:function(t){g(null),function(n,t){return fetch("".concat(f,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(i,j).then((function(t){if(0===t.ok)return g(t.message);b(t.token),l().then((function(t){if(1!==t.ok)return b(null),g(t.toString());n(t.data),m.push("/")}))}))},children:[Object(r.jsxs)("div",{children:["\u5e33\u865f:",Object(r.jsx)("input",{value:i,onChange:function(n){return a(n.target.value)}})]}),Object(r.jsxs)("div",{children:["\u5bc6\u78bc:",Object(r.jsx)("input",{type:"password",value:j,onChange:function(n){return d(n.target.value)}})]}),Object(r.jsx)("button",{children:"\u767b\u5165"}),v&&Object(r.jsx)(w,{children:v})]})}var z=e(10);function P(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return P=function(){return n},n}function $(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]);return $=function(){return n},n}function B(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]);return B=function(){return n},n}function J(){var n=Object(u.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]);return J=function(){return n},n}var A=s.a.div(J()),D=s.a.div(B()),E=Object(s.a)(z.b)($()),I=s.a.div(P());function U(n){var t=n.post;return Object(r.jsxs)(D,{children:[Object(r.jsx)(E,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(I,{children:new Date(t.createdAt).toLocaleString()})]})}function N(){var n=Object(c.useState)([]),t=Object(o.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){fetch("".concat(f,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()})).then((function(n){return i(n)}))}),[]),Object(r.jsx)(A,{children:e.map((function(n){return Object(r.jsx)(U,{post:n},n.id)}))})}function T(){var n=Object(u.a)(["\n  flex: 1;\n  height: 300px;\n  background-image: url('https://mcdonalds.com.au/sites/mcdonalds.com.au/files/Product-Details-BigMac-mobile-201904.jpg');\n  background-size: cover;\n  background-position: center center;\n  background-repeat:no-repeat;\n"]);return T=function(){return n},n}function K(){var n=Object(u.a)([""]);return K=function(){return n},n}function L(){var n=Object(u.a)(["\n  margin: 0;\n"]);return L=function(){return n},n}function R(){var n=Object(u.a)(["\n  flex: 2;\n  margin-right: 24px;\n"]);return R=function(){return n},n}function Y(){var n=Object(u.a)(["\n  display: flex;\n  width: 800px;\n  margin: 0 auto;\n  padding: 40px 0;\n"]);return Y=function(){return n},n}var _=s.a.div(Y()),F=s.a.div(R()),H=s.a.h1(L()),M=s.a.p(K()),q=s.a.div(T());function G(){return Object(r.jsxs)(_,{children:[Object(r.jsxs)(F,{children:[Object(r.jsx)(H,{children:"\u55e8~ \u6211\u662f YSKuo."}),Object(r.jsx)(M,{children:"\u6211\u662f YSKuo \u559c\u6b61\u300c\u7121\u6575\u5927\u9ea5\u514b\u300d\uff0c\u9019\u662f\u7528\u4f86\u7df4\u7fd2 React Router \u53ca\u4e32 API \u7684\u4f5c\u696d\u3002"})]}),Object(r.jsx)(q,{})]})}function Q(){var n=Object(u.a)(["\n  margin: 20px 0;\n"]);return Q=function(){return n},n}function V(){var n=Object(u.a)(["\n  align-self: flex-end;\n  margin: 0;\n"]);return V=function(){return n},n}function W(){var n=Object(u.a)(["\n  margin-bottom: 0;\n"]);return W=function(){return n},n}function X(){var n=Object(u.a)(["\n  box-sizing: border-box;\n  border: 1px solid black;\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin: 20px auto;\n  padding: 0 20px;\n"]);return X=function(){return n},n}var Z=s.a.div(X()),nn=s.a.h2(W()),tn=s.a.p(V()),en=s.a.p(Q());function rn(){var n=Object(c.useState)({}),t=Object(o.a)(n,2),e=t[0],i=t[1],a=Object(O.h)().id;return Object(c.useEffect)((function(){(function(n){return fetch("".concat(f,"/posts?id=").concat(n)).then((function(n){return n.json()}))})(a).then((function(n){return i(n[0])}))}),[]),Object(r.jsxs)(Z,{children:[Object(r.jsx)(nn,{children:e.title}),Object(r.jsxs)(tn,{children:[Object(r.jsx)("b",{children:"\u5beb\u65bc\uff1a"}),new Date(e.createdAt).toLocaleString()]}),Object(r.jsx)(en,{children:e.body})]})}function cn(){var n=Object(u.a)([""]);return cn=function(){return n},n}function an(){var n=Object(u.a)(["\n  width: 300px;\n  margin-left: 20px;\n"]);return an=function(){return n},n}function on(){var n=Object(u.a)(["\n  display: flex;\n  align-items: flex-start;\n  margin-bottom: 20px;\n"]);return on=function(){return n},n}function un(){var n=Object(u.a)(["\n  width: 300px;\n  margin-left: 20px;\n"]);return un=function(){return n},n}function sn(){var n=Object(u.a)(["\n  display: flex;\n  margin-bottom: 20px;\n"]);return sn=function(){return n},n}function jn(){var n=Object(u.a)(["\n  width: 60%;\n  margin: 0 auto;\n  padding: 40px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return jn=function(){return n},n}function bn(){var n=Object(u.a)(["\n  color: red;\n"]);return bn=function(){return n},n}var dn=s.a.div(bn()),fn=s.a.form(jn()),ln=s.a.div(sn()),On=s.a.input(un()),hn=s.a.div(on()),xn=s.a.textarea(an()),pn=s.a.button(cn());function vn(){var n=Object(c.useState)(""),t=Object(o.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),u=Object(o.a)(a,2),s=u[0],j=u[1],b=Object(c.useState)(),l=Object(o.a)(b,2),h=l[0],x=l[1],p=Object(O.f)();return Object(r.jsxs)(fn,{onSubmit:function(n){n.preventDefault(),function(n,t){var e=d();return fetch("".concat(f,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(e,s).then((function(n){if(0===n.ok)return x(n.message);p.push("/")}))},children:[Object(r.jsxs)(ln,{children:["\u6a19\u984c:",Object(r.jsx)(On,{value:e,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(hn,{children:["\u5167\u5bb9:",Object(r.jsx)(xn,{rows:10,value:s,onChange:function(n){return j(n.target.value)}})]}),Object(r.jsx)(pn,{children:"\u767c\u8868"}),h&&Object(r.jsx)(dn,{children:h})]})}function gn(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 64px;\n  }\n"]);return gn=function(){return n},n}function mn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"]);return mn=function(){return n},n}function Sn(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]);return Sn=function(){return n},n}function yn(){var n=Object(u.a)(["\n  font-size: 32px;\n  font-weight: bold;\n"]);return yn=function(){return n},n}function wn(){var n=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0 32px;\n  box-sizing: border-box;\n  background-color: white;\n"]);return wn=function(){return n},n}var kn=s.a.div(wn()),Cn=s.a.div(yn()),zn=s.a.div(Sn()),Pn=Object(s.a)(z.b)(mn(),(function(n){return n.$active&&"\n    background: rgba(0, 0, 0, 0.2);\n  "})),$n=s.a.div(gn(),zn);function Bn(){var n=Object(O.g)(),t=Object(O.f)(),e=Object(c.useContext)(h),i=e.user,a=e.setUser;return Object(r.jsxs)(kn,{children:[Object(r.jsxs)($n,{children:[Object(r.jsx)(Cn,{children:"\u6211\u7684\u7b2c\u4e00\u500b Blog"}),Object(r.jsxs)(zn,{children:[Object(r.jsx)(Pn,{to:"/",$active:"/"===n.pathname,children:"\u9996\u9801"}),Object(r.jsx)(Pn,{to:"/about",$active:"/about"===n.pathname,children:"\u95dc\u65bc"}),i&&Object(r.jsx)(Pn,{to:"/new-post",$active:"/new-post"===n.pathname,children:"\u767c\u5e03"})]})]}),Object(r.jsxs)(zn,{children:[!i&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Pn,{to:"/sign-up",$active:"/sign-up"===n.pathname,children:"\u8a3b\u518a"}),Object(r.jsx)(Pn,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"})]}),i&&Object(r.jsx)(Pn,{onClick:function(){b(""),a(null),"/"!==n.pathname&&t.push("/")},children:"\u767b\u51fa"})]})]})}function Jn(){var n=Object(u.a)(["\n  padding-top: 64px;\n"]);return Jn=function(){return n},n}var An=s.a.div(Jn());var Dn=function(){var n=Object(c.useState)(null),t=Object(o.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){d()&&l().then((function(n){n.ok&&i(n.data)}))}),[]),Object(r.jsx)(h.Provider,{value:{user:e,setUser:i},children:Object(r.jsx)(An,{children:Object(r.jsxs)(z.a,{children:[Object(r.jsx)(Bn,{children:"Header"}),Object(r.jsxs)(O.c,{children:[Object(r.jsx)(O.a,{exact:!0,path:"/",children:Object(r.jsx)(N,{})}),Object(r.jsx)(O.a,{path:"/about",children:Object(r.jsx)(G,{})}),Object(r.jsx)(O.a,{path:"/login",children:Object(r.jsx)(C,{})}),Object(r.jsx)(O.a,{path:"/sign-up",children:Object(r.jsx)(m,{})}),Object(r.jsx)(O.a,{path:"/post/:id",children:Object(r.jsx)(rn,{})}),Object(r.jsx)(O.a,{path:"/new-post",children:Object(r.jsx)(vn,{})})]})]})})})};a.a.render(Object(r.jsx)(Dn,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.57defa4d.chunk.js.map